!function($){"use strict";function t(t,i,e,n,o){var a={url:spuvar.ajax_url,data:t,cache:!1,type:"POST",dataType:"json",timeout:3e4},o=o||!1,e=e||!1,n=n||!1;i&&(a.url=i),e&&(a.success=e),n&&(a.error=n),o&&(a.dataType=o),$.ajax(a)}function i(t,i,e){if(e){var n=new Date;n.setTime(n.getTime()+24*e*60*60*1e3);var o="; expires="+n.toGMTString()}else var o="";document.cookie=t+"="+i+o+"; path=/"}function e(t){for(var i=t+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var o=e[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(i))return o.substring(i.length,o.length)}return null}function n(){FB.Event.subscribe("edge.create",function(t,i){var e=$(i).parents(".spu-box").data("box-id");e&&(d.hide(e),d.track(e,!0))}),p=!0,clearInterval(l)}function o(t){var i=$(t.target).parents(".spu-box").data("box-id");i&&d.hide(i)}function a(t){if("on"==t.state){var i=jQuery(".spu-gogl").data("box-id");i&&d.hide(i)}}function r(t){if("confirm"==t.type){var i=jQuery(".spu-gogl").data("box-id");i&&d.hide(i)}}function s(){if(spuvar_social.facebook)try{FB.XFBML.parse()}catch(t){}spuvar_social.google&&gapi.plusone.go(),spuvar_social.twitter&&twttr.widgets.load()}var d=function(){function n(t){var i=d[t],e=$(window).width(),n=$(window).height(),o=i.height(),a=i.width();i.css({position:"fixed",top:n/2-o/2,left:e/2-a/2})}function o(t){var i=$(t).find(".spu-facebook");if(i.length){var e=i.find(".fb-like > span").width();if(0==e){var n=i.find(".fb-like").data("layout");i.append("box_count"==n?'<style type="text/css"> #'+$(t).attr("id")+" .fb-like iframe, #"+$(t).attr("id")+" .fb_iframe_widget span, #"+$(t).attr("id")+" .fb_iframe_widget{ height: 63px !important;width: 80px !important;}</style>":'<style type="text/css"> #'+$(t).attr("id")+" .fb-like iframe, #"+$(t).attr("id")+" .fb_iframe_widget span, #"+$(t).attr("id")+" .fb_iframe_widget{ height: 20px !important;width: 80px !important;}</style>")}}}function a(t,e){var o=d[t],a=$("#spu-bg-"+t),r=o.data("bgopa");if(o.is(":animated"))return!1;if(e===!0&&o.is(":visible")||e===!1&&o.is(":hidden"))return!1;if(e===!1){var s=parseInt(o.data("cookie"));s>0&&i("spu_box_"+t,!0,s)}else o.hasClass("spu-centered")&&($(window).resize(function(){n(t)}),n(t));var u=o.data("spuanimation");return"fade"===u?o.fadeToggle("slow"):o.slideToggle("slow"),e===!0&&r>0?a.fadeIn():a.fadeOut(),e}var r=$(window).height(),s=spuvar.is_admin,d=[];return $(".spu-content").children().first().css({"margin-top":0,"padding-top":0}).end().last().css({"margin-bottom":0,"padding-bottom":0}),$(".spu-box").each(function(){spuvar.safe_mode&&$(this).prependTo("body");var i=$(this),n=i.data("trigger"),u=0,c=1===parseInt(i.data("test-mode")),f=i.data("box-id"),p=1===parseInt(i.data("auto-hide")),l=parseInt(i.data("seconds-close")),h=parseInt(i.data("trigger-number"),10),g="percentage"==n?parseInt(i.data("trigger-number"),10)/100:.8,w=g*$(document).height();o(i),$(".spu-google").width($(".spu-google").width()-20),$(".spu-twitter").width($(".spu-twitter").width()-12);var m=0,v=0,b=i.width(),y=i.find(".spu-content").width(),_=i.data("total");$(".spu-shortcode").wrapAll('<div class="spu_shortcodes"/>'),_&&!spuvar.disable_style&&$(window).width()>b&&($(this).find(".spu-shortcode").each(function(){m+=$(this).width()}),v=y-m-_),v>0&&($(this).find(".spu-shortcode").each(function(){3==_?$(this).css("margin-left",v/(_-1)):$(this).css("margin-left",v/2)}),2==_?$(this).find(".spu-shortcode").last().css("margin-left",0):3==_&&$(this).find(".spu-shortcode").first().css("margin-left",0)),$(document).keyup(function(t){27==t.keyCode&&a(f,!1)});var x=navigator.userAgent,k=x.match(/iPad/i)||x.match(/iPhone/i)?"touchstart":"click";$("body").on(k,function(t){void 0!==t.originalEvent&&a(f,!1)}),$("body").on(k,".spu-box",function(t){t.stopPropagation()}),i.hide().css("left",""),d[f]=i;var T=function(){u&&clearTimeout(u),u=window.setTimeout(function(){var t=$(window).scrollTop(),i=t+r>=w;i?(p||$(window).unbind("scroll",T),a(f,!0)):a(f,!1)},100)},j=function(){u&&clearTimeout(u),u=window.setTimeout(function(){a(f,!0)},1e3*h)},I=e("spu_box_"+f);if((void 0==I||""==I||s&&c)&&("seconds"==n?j():($(window).bind("scroll",T),T()),window.location.hash&&window.location.hash.length>0)){var F=window.location.hash,P;F.substring(1)===i.attr("id")&&setTimeout(function(){a(f,!0)},100)}i.find(".spu-close-popup").click(function(){a(f,!1),"percentage"==n&&$(window).unbind("scroll",T)}),$('a[href="#'+i.attr("id")+'"]').click(function(){return a(f,!0),!1}),i.find(".gform_wrapper form").addClass("gravity-form"),i.on("submit",'form:not(".wpcf7-form, .gravity-form")',function(i){i.preventDefault(),track(f,!0);var e=!0,n=$(this),o=n.serialize(),r=n.attr("action"),s=function(t,i,e){console.log("Spu Form error: "+i+" - "+e)},d=function(t){var i=$(t).filter("#spu-"+f).html();$("#spu-"+f).html(i),$("#spu-"+f).find(".mc4wp-form-error").length||setTimeout(function(){a(f,!1)},1e3*spuvar.seconds_confirmation_close)};return t(o,r,d,s,"html"),e}),$("body").on("mailsent.wpcf7",function(){a(f,!1)}),$(document).on("gform_confirmation_loaded",function(){a(f,!1)})}),{show:function(t){return a(t,!0)},hide:function(t){return a(t,!1)},request:function(i,e,n,o){return t(i,e,n,o)}}};if(spuvar.ajax_mode){var u={pid:spuvar.pid,referrer:document.referrer},c=function(t){$("body").append(t),s(),d()},f=function(t,i,e){console.log("Problem loading popups - error: "+i+" - "+e)};t(u,spuvar.ajax_mode_url,c,f,"html")}else jQuery(window).load(function(){d()});var p=!1,l=setInterval(function(){"undefined"==typeof FB||p||n()},1e3);"undefined"!=typeof twttr&&twttr.ready(function(t){t.events.bind("tweet",o),t.events.bind("follow",o)})}(jQuery);